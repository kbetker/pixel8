extends layout

append head
    link(rel="stylesheet" href="/stylesheets/users.css")
block content
    .spacer
    .container
        h1= title
        .body--container
            div= `Username: ${user.username}`
            div= `Joined on: ${user.createdAt}`
            div= `About: ${user.about}`
            if locals.authenticated && user.id === sessionUserId
                .form--container
                    a(href=`/users/${user.id}/edit`)
                        button(class='btn' name='action' value='edit' type='submit') Edit User Info
            div= `Stories Posted:`
                each Pixel_Story in user.Pixel_Stories
                    div
                    a(href=`/stories/${Pixel_Story.id}` class="nav--link")= `${Pixel_Story.title}`
            if locals.authenticated && user.id === sessionUserId
                div= `Users who follow you:`
                    each follower in user.followers
                        div
                        a(href=`/users/${follower.id}` class="nav--link")= `${follower.username}`
                div= `Users you follow:`
                    each following in user.followings
                        div
                        a(href=`/users/${following.id}` class="nav--link")= `${following.username}`
            else if locals.authenticated && user.id !== sessionUserId && !following
                form(action=`/users/${user.id}/follow` method='post')
                        input(type='hidden' name='_csrf' value=csrfToken)
                        .form--element
                            button(class='btn' name='action' value= 'subscribe' type='submit') Follow this user!
            else if locals.authenticated && user.id !== sessionUserId && following
                form(action=`/users/${user.id}/follow` method='post')
                        input(type='hidden' name='_csrf' value=csrfToken)
                        .form--element
                            button(class='btn' name='action' value= 'subscribe' type='submit') Unfollow this user!
